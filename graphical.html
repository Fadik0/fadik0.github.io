<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <style>
            .axis path, .axis line {
                fill: none;
                stroke: #333;
            }
            .axis .grid-line {
                stroke: #000;
                stroke-opacity: 0.2;
            }
            .axis text {
                font: 10px Verdana;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Methods of linear programming!</a>
                </div>
                <ul class="nav navbar-nav">
                    <li><a href="./simplex.html">Симплекс-Метод</a></li>
                    <li class="active"><a href="./graphical.html">Графический метод</a></li>
                </ul>
            </div>
        </nav>
        <br>
        <br>
        <br>   
        <div id="graphical" class="container-fluid">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <a href="#a" data-toggle="collapse">Выбор начальных параметров</a>
                </div>
                <div id="a" class="collapse in">
                    <div class="panel-body">
                        <form class="form-inline" role="form">
                            <div class="form-group">
                                <label class="control-label" for="restrictions">Кол-во ограничений:</label>       
                                <select class="form-control" id="restrictions">
                                    <option>1</option>
                                    <option selected>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                </select> 
                            </div>         
                        </form>  
                    </div>
                    <input type='button' class="btn btn-info btn-block" value='Выбрать' onClick="CreateEnterTable()"> 
                </div>       
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <a href="#c" data-toggle="collapse">График</a>
                </div>
                <div id="c" class="collapse in">
                    <div class="panel-body" id="graph" align="center">
                          
                    </div> 
                </div>       
            </div>
        </div>       
        <script type="text/javascript">         
            var height = 600, 
                width = 600, 
                margin=30;

            var svg = d3.select("#graph")
                .append("svg")
                .attr("class", "axis")
                .attr("width", width)
                .attr("height", height);
            
            var gtooltip = d3.select("#graph")
                .append("kbd")   
                .attr("class", "tooltip")               
                .style("opacity", 0)
                .style("font", "12px sans-serif");

            // длина оси X= ширина контейнера svg - отступ слева и справа
            var xAxisLength = width - 2 * margin;     

            // длина оси Y = высота контейнера svg - отступ сверху и снизу
            var yAxisLength = height - 2 * margin;

            // функция интерполяции значений на ось Х  
            var scaleX = d3.scale.linear()
                .domain([-650, 650])
                .range([0, xAxisLength]);

            // функция интерполяции значений на ось Y
            var scaleY = d3.scale.linear()
                .domain([650, -650])
                .range([0, yAxisLength]);

            // создаем ось X   
            var xAxis = d3.svg.axis()
                .scale(scaleX)
                .orient("bottom");
            
            // создаем ось Y             
            var yAxis = d3.svg.axis()
                .scale(scaleY)
                .orient("left");

             // отрисовка оси Х             
            svg.append("g")       
                .attr("class", "x-axis")
                .attr("transform", "translate(" + margin + "," + (height / 2)  + ")")
                .call(xAxis);

             // отрисовка оси Y 
            svg.append("g")       
                .attr("class", "y-axis")
                .attr("transform", "translate(" + ( width / 2) + "," + margin  + ")")
                .call(yAxis);

            // создаем набор вертикальных линий для сетки   
            d3.selectAll("g.x-axis g.tick")
                .append("line")
                .classed("grid-line", true)
                .attr("x1", 0)
                .attr("y1", yAxisLength / 2)
                .attr("x2", 0)
                .attr("y2", - yAxisLength / 2);

            // рисуем горизонтальные линии 
            d3.selectAll("g.y-axis g.tick")
                .append("line")
                .classed("grid-line", true)
                .attr("x1", - (xAxisLength / 2))
                .attr("y1", 0)
                .attr("x2", (xAxisLength / 2))
                .attr("y2", 0);
            
            function newline(x1, y1, x2, y2, color) { 
                svg.append("line")
                    .style("stroke", color)
                    .style("stroke-width", "2")
                    .attr("x1", scaleX(x1) + margin)
                    .attr("y1", scaleY(y1) + margin)
                    .attr("x2", scaleX(x2) + margin)
                    .attr("y2", scaleY(y2) + margin);
                svg.append("circle")
                    .attr("class", "dot")
                    .attr("r", 3)
                    .attr("cx", scaleX(x1) + margin)
                    .attr("cy", scaleY(y1) + margin)
                    .on("mouseover", function(d) {      
                        gtooltip.transition()        
                            .duration(200)      
                            .style("opacity", .9);      
                        gtooltip.html(x1 + ", "  + y1)  
                            .style("left", (d3.event.pageX) + "px")     
                            .style("top", (d3.event.pageY - 28) + "px");    
                        })                  
                    .on("mouseout", function(d) {       
                        gtooltip.transition()        
                            .duration(500)      
                            .style("opacity", 0);   
                    });
                svg.append("circle")
                    .attr("class", "dot")
                    .attr("r", 3)
                    .attr("cx", scaleX(x2) + margin)
                    .attr("cy", scaleY(y2) + margin)
                    .on("mouseover", function(d) {      
                        gtooltip.transition()        
                            .duration(200)      
                            .style("opacity", .9);      
                        gtooltip.html(x2 + ", "  + y2)  
                            .style("left", (d3.event.pageX) + "px")     
                            .style("top", (d3.event.pageY - 28) + "px");    
                        })                  
                    .on("mouseout", function(d) {       
                        gtooltip.transition()        
                            .duration(500)      
                            .style("opacity", 0);   
                    });
            }

            newline(475, 0, 0, 633.33, "orange");
            
            newline(600, 0, 0, 300, "steelblue");
            
            newline(400, 100, 0, 100, "green");
            
            newline(400, 0, 400, 100, "green");
            
            //newline(560, 0, -100, 420, "green" );
        </script>
    </body>
</html>